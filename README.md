# CTMtoEMU

A python program to convert CTM files (usually generated by Kaldi) into an EMU SDMS database.

## Requirements

This program is pretty self-contained and has very little requirements, with the exception of a transcriber.

These can be installed using **pip** or **easy_install**:
  
  * tqdm - for progress bars
  * pyphen - for syllabification
  
These have to be installed in some other way:

  * R - required for signal processing (formant estimation)
  * [wrassp](https://cran.r-project.org/web/packages/wrassp/index.html) - speech processing library installable from within R
  * transcriber - for G2P (used to connect syllables to phonemes)
  
### About the transcriber

This is the only component not easily available. Since it is somewhat language/task dependent, it's not easy to make a universal
interface in this project. This will be worked on.

If you want to use the program wihtout it, try to comment out the code that creates links between phonemes and syllables, or 
remove syllable creation altogether.

# Usage
    usage: CTM_to_Emu.py [-h] [--wav-scp WAV_SCP] [--utt2ses UTT2SES] [-o]
                         [-n NAME] [-r RATE] [--rm-besi] [--split SPLIT]
                         [--transcriber TRANSCRIBER]
                         out_dir words_ctm phones_ctm [wav]

    Program to convert CTM files (usually generated by Kaldi) into a folder
    structure used by EMU-SDMS

    positional arguments:
      out_dir               Output directory
      words_ctm             CTM containing words
      phones_ctm            CTM contatinng phonemes
      wav                   Wave file corresponging to CTMs (only if single file,
                            use --wav-scp for multiple files)

    optional arguments:
      -h, --help            show this help message and exit
      --wav-scp WAV_SCP     List of WAV files if CTM contains references to
                            multiple files. Uses Kaldi wav.scp format.
      --utt2ses UTT2SES     List of utterance to session mappings (similar to
                            utt2spk).
      -o, --overwrite       Overwrite output directory.
      -n NAME, --name NAME  Name of the database.
      -r RATE, --rate RATE  Samplerate of WAV file
      --rm-besi             Remove _B,_E,_S,_I from phonemes
      --split SPLIT         Split long file into segments at least this meany
                            seconds long.
      --transcriber TRANSCRIBER
                            Path to the transcriber program.
